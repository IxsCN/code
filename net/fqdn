#!/usr/bin/env perl
use warnings;
use strict;
use Sys::Hostname;

sub getfqdn {
	my ($host) = @_;

	if (eval {require Socket::GetAddrInfo}) {
		Socket::GetAddrInfo->import("getaddrinfo", ":constants");
		my ($err, @res) = getaddrinfo($host, undef, {
			flags => &AI_CANONNAME,
		});
		return $res[0]->{canonname};
	} else {
		my @res = gethostbyname($host);
		return $res[0] // $host;
	}
}

if (@ARGV) {
	print getfqdn($_)."\n" for @ARGV;
} else {
	print getfqdn(hostname)."\n";
}
