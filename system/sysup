#!/usr/bin/env bash

. lib.bash || exit

set -e


if have pacman; then
	tool=pacman
elif have apt && test -x /usr/bin/apt; then
	tool=apt
elif have apt-get; then
	tool=apt-get
elif have yum; then
	tool=yum
else
	die "no known package manager found"
fi

case $tool in
	apt)
		debug "detected unified apt interface"
		sudo: apt update
		sudo: apt full-upgrade -V "$@";;
	apt-get)
		debug "detected Debian apt-get"
		sudo: apt-get update
		sudo: apt-get dist-upgrade -V "$@";;
	pacman)
		debug "detected Arch Linux pacman"
		sudo: pacman -Syu "$@";;
	yum)
		debug "detected Fedora yum"
		sudo: yum update "$@";;
esac
